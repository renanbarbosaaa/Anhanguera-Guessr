<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anhanguera Guessr - Descubra o Local</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
  
    <div id="registrationScreen" class="screen active">
        <div class="registration-container">
            <div class="background-image"></div>
            
            <div class="registration-card">
                <div class="logo-container">
                    <h1>Anhanguera Guessr</h1>
                    <p class="subtitle">Primeira Turma de DS - 2024/2025</p>
                </div>
                <div class="form-group">
                    <label for="playerName">Seu Nome:</label>
                    <input type="text" id="playerName" placeholder="Digite seu nome completo" maxlength="20">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="playerYear">Sua SÃ©rie:</label>
                        <select id="playerYear" class="form-select">
                            <option value="">Selecione o ano</option>
                            <option value="1">1Âº Ano</option>
                            <option value="2">2Âº Ano</option>
                            <option value="3">3Âº Ano</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="playerClass">Turma:</label>
                        <select id="playerClass" class="form-select">
                            <option value="">Selecione a turma</option>
                            <option value="A">A</option>
                            <option value="A ADM">A ADM</option>
                            <option value="B">B</option>
                            <option value="B DS">B DS</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                            <option value="E">E</option>
                            <option value="F">F</option>
                        </select>
                    </div>
                </div>
                <div class="form-row" style="margin-top:8px;">
                    <div class="form-group">
                        <label for="difficultySelect">Dificuldade:</label>
                        <select id="difficultySelect" class="form-select">
                            <option value="medium">MÃ©dio</option>
                            <option value="easy">FÃ¡cil</option>
                            <option value="hard">DifÃ­cil</option>
                        </select>
                    </div>
                </div>
                <div class="selected-info">
                    <div id="selectedName" class="hidden">ğŸ‘¤ Nome: <span></span></div>
                    <div id="selectedSerie" class="hidden">ğŸ“ SÃ©rie: <span></span></div>
                </div>
                <button id="startGameBtn" class="start-btn disabled" disabled>ğŸ¯ Iniciar Jogo</button>
                <label style="display:block; margin-top:8px; font-size:0.9em;"><input id="practiceModeCheckbox" type="checkbox" style="margin-right:8px;"> Modo PrÃ¡tica (2 rodadas)</label>
                <button id="openLeaderboardBtn" class="start-btn" style="margin-top:10px; background:#ffd166; color:#000;">ğŸ† Ver Ranking</button>
                <button id="openTutorialBtn" class="start-btn" style="margin-top:10px; background:#00c2ff; color:#000;">ğŸ’¡ Ver Tutorial</button>
            </div>
        </div>
    </div>

    <!-- Tutorial Modal -->
    <div id="tutorialModal" class="modal" aria-hidden="true">
        <div class="modal-content">
            <h2>Bem-vindo ao Anhanguera Guessr ğŸ‘‹</h2>
            <p>VocÃª verÃ¡ 5 fotos e deve adivinhar em qual local da planta as fotos foram tiradas.</p>
            <ul>
                <li>Use o mapa no canto inferior direito para clicar e confirmar sua escolha.</li>
                <li>VocÃª tem 30 segundos por rodada.</li>
                <li>PontuaÃ§Ã£o Ã© maior quanto mais prÃ³ximo vocÃª estiver do local certo.</li>
            </ul>
            <div class="modal-actions">
                <label><input type="checkbox" id="dontShowTutorial"> NÃ£o mostrar novamente</label>
                <button id="closeTutorialBtn" class="play-again-btn">ComeÃ§ar</button>
            </div>
        </div>
    </div>

    <div id="gameScreen" class="screen">
        <div class="panorama-container">
            <img id="currentPhoto" src="" alt="Foto do local">
            <div class="photo-overlay-instruction">
                <p>Onde esta foto foi tirada?</p>
            </div>
        </div>

        <button id="exitGameBtn" class="exit-game-btn" title="Voltar ao Menu">ğŸ  Sair</button>

        <div class="game-hud">
            <div class="hud-item player-info">
                ğŸ‘¤ <span id="currentPlayerName"></span> (<span id="currentPlayerSerie"></span>)
                <span id="modeIndicator" style="margin-left:8px; font-size:0.9em; color:#ffd166; display:none;">[PrÃ¡tica]</span>
            </div>
            <div class="hud-item timer-info">
                â±ï¸ <span id="timer">30</span>s
                <!-- Circular timer SVG -->
                <svg id="timerRing" width="28" height="28" viewBox="0 0 36 36" style="vertical-align:middle; margin-left:8px;">
                    <path stroke="#444" stroke-width="3.5" fill="none" d="M18 2.0845
                        a 15.9155 15.9155 0 0 1 0 31.831
                        a 15.9155 15.9155 0 0 1 0 -31.831"/>
                    <path id="timerRingProgress" stroke="#00ff00" stroke-width="3.5" fill="none" stroke-dasharray="100,100" d="M18 2.0845
                        a 15.9155 15.9155 0 0 1 0 31.831
                        a 15.9155 15.9155 0 0 1 0 -31.831"/>
                </svg>
            </div>
            <div class="hud-item score-info">
                ğŸ† <span id="score">0</span> pts
            </div>
            <div class="hud-item audio-controls">
                ğŸ”Š <button id="muteBtn" title="Mudo">ğŸ”ˆ</button>
                <input id="volumeSlider" type="range" min="0" max="1" step="0.05" value="1" style="width:100px; margin-left:8px;">
            </div>
            <div class="hud-item round-info">
                ğŸ“ <span id="round">1</span>/5
            </div>
        </div>

        <div class="mini-map-wrapper" id="miniMapWrapper">
            <div class="map-header-small">
                <span>ğŸ—ºï¸ Passe o mouse para ampliar</span>
            </div>
            
            <div class="map-container">
                <img id="schoolMap" src="Imagens/PlantaBaixaAnhanguera.png" alt="Planta da Escola">
                <div class="map-overlay" id="mapOverlay"></div>
                    <div class="mini-map-controls" style="position:absolute; right:10px; bottom:8px; align-items:center;">
                        <button id="revealZoneBtn" class="confirm-btn" title="Revelar Ã¡rea (2 vezes)" style="background:#ffd166;">ğŸ”</button>
                        <span id="revealCount" style="color:#fff; font-weight:700; margin-left:6px;">2/2</span>
                    </div>
                </div>
            <button id="confirmGuess" class="confirm-btn">âœ… Confirmar</button>
        </div>
    </div>

    <div id="roundResultScreen" class="screen">
        <div class="result-container">
            <div class="result-card">
                <div id="resultIcon" class="result-icon">ğŸ¯</div>
                <h2 id="resultTitle">Resultado</h2>
                <div id="resultMessage" class="result-message"></div>
                <div class="round-stats">
                    <div class="stat">
                        <span class="stat-label">Pontos Ganhos:</span>
                        <span id="pointsEarned" class="stat-value">+0</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">PontuaÃ§Ã£o Total:</span>
                        <span id="totalScore" class="stat-value">0</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">PrÃ³xima Rodada:</span>
                        <span id="nextRoundNumber" class="stat-value">2/5</span>
                    </div>
                </div>
                <button id="nextRoundBtn" class="next-round-btn">ğŸ¯ PrÃ³xima Rodada â†’</button>
            </div>
        </div>
    </div>

    <div id="gameOverScreen" class="screen">
        <div class="game-over-container">
            <div class="game-over-card">
                <div class="trophy">ğŸ†</div>
                <h1>Jogo ConcluÃ­do!</h1>
                <div class="final-stats">
                    <div class="final-stat">
                        <span class="final-label">Jogador:</span>
                        <span id="finalPlayerName" class="final-value"></span>
                    </div>
                    <div class="final-stat">
                        <span class="final-label">SÃ©rie:</span>
                        <span id="finalPlayerSerie" class="final-value"></span>
                    </div>
                    <div class="final-stat highlight">
                        <span class="final-label">PontuaÃ§Ã£o Final:</span>
                        <span id="finalScore" class="final-value">0</span>
                    </div>
                    <div class="final-stat">
                        <span class="final-label">Desempenho:</span>
                        <span id="performance" class="final-value">IncrÃ­vel!</span>
                    </div>
                    <div class="final-stat">
                        <span class="final-label">PosiÃ§Ã£o no Ranking:</span>
                        <span id="finalPlayerRank" class="final-value">-</span>
                    </div>
                </div>
                <div class="final-actions">
                    <button id="playAgainBtn" class="play-again-btn">ğŸ”„ Jogar Novamente</button>
                    <button id="backToMenuBtn" class="change-player-btn">ğŸ  Voltar ao Menu</button>
                    <button id="saveToLeaderboardBtn" class="start-btn" style="margin-top:10px; background:#ffd166; color:#000;">ğŸ’¾ Salvar no Ranking</button>
                    <button id="copyResultBtn" class="change-player-btn" style="margin-top:10px;">ğŸ“‹ Copiar Resultado</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Tela do Ranking -->
    <div id="leaderboardScreen" class="screen">
        <div class="leaderboard-container">
            <div class="leaderboard-card">
                <h1>ğŸ† Ranking - Top 10</h1>
                <div class="leaderboard-filters" style="display:flex; gap:10px; margin-bottom:12px; align-items:center;">
                    <select id="filterYear"><option value="">Todas as SÃ©ries</option><option value="1">1Âº Ano</option><option value="2">2Âº Ano</option><option value="3">3Âº Ano</option></select>
                    <select id="filterClass"><option value="">Todas as Turmas</option><option value="A">A</option><option value="A ADM">A ADM</option><option value="B">B</option><option value="B DS">B DS</option><option value="C">C</option><option value="D">D</option><option value="E">E</option><option value="F">F</option></select>
                        <select id="filterDifficulty"><option value="">Todas as Dificuldades</option><option value="easy">FÃ¡cil</option><option value="medium">MÃ©dio</option><option value="hard">DifÃ­cil</option></select>
                        <button id="clearFiltersBtn" class="change-player-btn" style="flex: 0 0 auto;">âœ– Limpar</button>
                </div>
                <table id="leaderboardTable" class="leaderboard-table">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Jogador</th>
                            <th>SÃ©rie</th>
                            <th>Dificuldade</th>
                            <th>Pontos</th>
                            <th>Data</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
                <div class="leaderboard-actions">
                    <button id="exportLeaderboardBtn" class="change-player-btn">â¬‡ï¸ Exportar JSON</button>
                    <button id="exportLeaderboardCSVBtn" class="change-player-btn">â¬‡ï¸ Exportar CSV</button>
                    <button id="importLeaderboardBtn" class="change-player-btn">â¬†ï¸ Importar JSON</button>
                    <input id="importJsonInput" type="file" accept="application/json" style="display:none;" />
                    <label style="display:flex; align-items:center; gap:8px;" title="Baixa automaticamente um arquivo JSON com o ranking sempre que vocÃª salvar">
                        <input type="checkbox" id="autoBackupCheckbox"> Autoâ€“backup (JSON)
                    </label>
                    <button id="clearLeaderboardBtn" class="change-player-btn">ğŸ§¹ Limpar Ranking</button>
                    <button id="closeLeaderboardBtn" class="play-again-btn">â†©ï¸ Voltar</button>
                    <button id="copyLeaderboardBtn" class="change-player-btn">ğŸ“‹ Copiar CSV</button>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <!-- Confetti container -->
    <div class="confetti-container" id="confettiContainer"></div>
    <!-- Toast container -->
    <div id="toastContainer" aria-live="polite" style="position:fixed;top:16px;right:16px;z-index:99999;"></div>
</body>
</html>